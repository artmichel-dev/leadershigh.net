---
import RootLayout from '@layouts/RootLayout.astro'
import HeroContainer from '@components/shared/HeroContainer.astro'
import StarField from '@components/shared/StarField.astro'
import Button from '@components/shared/Button.astro'
import { Icon } from 'astro-icon/components'
import { Image } from 'astro:assets'

import spaceSpotlight from '@images/space-spotlight.png'
import cosmicButterfly from '@images/cosmic-butterfly.png'

const pathname = Astro.url.pathname.replace(/(?<=.)\/$/, '')
const { ...props } = Astro.props
---

<RootLayout {...props}>
  <HeroContainer
    header={false}
    class="flex min-h-screen items-center justify-center overflow-hidden py-16 sm:py-20"
    bgGradientClassName="-top-48 bottom-0 h-[calc(100%_+_320px)]"
    innerContainerClassName="w-full overflow-hidden sm:overflow-visible"
  >
    <div
      class="absolute -right-48 top-64 max-w-6xl translate-x-16 translate-y-full sm:top-96 sm:translate-y-1/3 md:right-0 md:w-full lg:top-0 lg:translate-x-1/4 lg:translate-y-0"
    >
      <Image
        src={spaceSpotlight}
        alt=""
        class="h-full w-full object-contain opacity-50 lg:opacity-75"
        widths={[420, 768, 1152]}
        sizes={`(max-width: 420px) 420px, (max-width: 768px) 768px, (min-width: 768px) 1152px`}
      />
    </div>

    <div class="absolute -left-96 -right-96 -top-96 bottom-0 -z-10">
      <Image
        src={cosmicButterfly}
        alt=""
        class="h-[calc(100%_+_384px)] w-[calc(100%_+_768px)] opacity-10 lg:opacity-5"
        widths={[420, 768, 1024]}
        sizes={`(max-width: 420px) 420px, (max-width: 768px) 768px, (max-width: 1024px) 1024px, (min-width: 1024px) 1024px`}
      />
    </div>

    <div
      class:list={[
        'absolute -left-8 bottom-0 -z-10 h-96 w-44 rotate-[-25deg] sm:bottom-8 sm:left-20 lg:bottom-[unset] lg:left-[unset] lg:right-48 lg:h-[550px]',
        pathname !== '/signup' && 'hidden xl:block',
      ]}
      aria-hidden="true"
    >
      <StarField density="high" maxRadius={2.25} />
    </div>

    <Button
      href="/"
      variant="secondary"
      size="md"
      class="absolute right-4 top-4 hidden p-2 sm:flex lg:right-12 lg:top-12 lg:p-2.5"
    >
      <Icon name="heroicons:x-mark" class="h-4.5 w-4.5 lg:h-5 lg:w-5" />
    </Button>

    <slot />
  </HeroContainer>
</RootLayout>
